<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<h:body>
	<ui:composition template="/layouts/basic-10.xhtml">
		<ui:param name="managedBean" value="#{geminiDataBean2}" />
		<ui:define name="title">ChatWithAi</ui:define>
		<ui:define name="content">
			<h3>AI Chat</h3>
			<h:form id="form" enctype="multipart/form-data">
				<div>
					<p:outputLabel for="option" value="Model" />
					<p:selectOneMenu id="option" value="#{managedBean.model}">
						<f:selectItems value="#{managedBean.onSelectModel()}" var="type"
							itemLabel="#{type.getName()}" itemValue="#{type}" />
					</p:selectOneMenu>
				</div>
				<p:panelGrid columns="1" layout="grid"
					styleClass="ui-panelgrid-blank ui-fluid">
					<ui:repeat var="conversation" value="#{managedBean.conversations}">
						<p:panel rendered="#{conversation.role == 'user'}">
							<h:outputText value="#{conversation.role}"
								style="font-weight:bold;" />
							<h:outputText value="#{conversation.text}" escape="false"
								style="white-space: pre-line; display:block; margin-bottom:20px;" />
						</p:panel>

						<p:panel rendered="#{conversation.role == 'model'}">
							<h:outputText value="#{conversation.role}"
								style="font-weight:bold; color: red" />
							<h:outputText value="#{conversation.text}"
								style="white-space: pre-line; display:block; margin-bottom:20px;" />
						</p:panel>
					</ui:repeat>
					<p:inputTextarea widgetVar="editor" id="editor"
						value="#{managedBean.inputtedMessage}" height="150"
						style="margin-bottom:10px" placeholder="How can I help you today?">
					</p:inputTextarea>
				</p:panelGrid>
				<br />
				<div class="command-btns">
					<p:fileUpload value="#{managedBean.files}" mode="simple" listener="#{managedBean.dandleFilesUpload()}"
						skinSimple="true" multiple="true"/>
					<p:commandButton id="refresh" value="refresh" update="form"
						actionListener="#{managedBean.onCleanText()}" icon="pi pi-refresh" />
					<p:commandButton id="proceed" value="send" update="form"
						actionListener="#{managedBean.onSendRequest()}" icon="pi pi-check" />
				</div>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>